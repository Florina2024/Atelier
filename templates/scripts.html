{% load static %}
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.1/jquery.min.js"></script>

<script src="https://cdn.jsdelivr.net/npm/swiper@9/swiper-bundle.min.js"></script>

<script type="text/javascript" src="{% static 'js/cart.js' %}"></script>

<script>
document.addEventListener("DOMContentLoaded", function() {
    window.addEventListener("scroll", function() {
        var menu = document.querySelector(".low-nav");
        if (window.scrollY > 50) {  // Ndryshon ngjyrën pasi scroll > 50px
            menu.classList.add("scrolled");
        } else {
            menu.classList.remove("scrolled");
        }
    });
});
</script>

<script>
document.addEventListener('DOMContentLoaded', function () {
  document.querySelectorAll('.product-slider').forEach(slider => {
    const slides = slider.querySelectorAll('.slide-image');
    const prevBtn = slider.querySelector('.prev-btn');
    const nextBtn = slider.querySelector('.next-btn');
    let current = 0;

    function showSlide(index) {
      slides.forEach((slide, i) => {
        slide.classList.toggle('active', i === index);
      });
    }

prevBtn.addEventListener('click', (event) => {
  event.preventDefault();
  event.stopPropagation();
  current = (current - 1 + slides.length) % slides.length;
  showSlide(current);
});

nextBtn.addEventListener('click', (event) => {
  event.preventDefault();
  event.stopPropagation();
  current = (current + 1) % slides.length;
  showSlide(current);
});

    showSlide(current); // për ta shfaqur slide-in e parë kur ngarkohet faqja
  });
});
</script>
<script>
  const cartToggle = document.querySelector('.cart-toggle');
  const cartModal = document.getElementById('cartModal');
  const closeBtn = document.querySelector('.close-modal');
  const openCartBtn = document.getElementById('openCartBtn');

if (cartToggle) {
  cartToggle.addEventListener('click', function(e) {
    e.preventDefault();
    cartModal.classList.add('open');
  });
}

if (openCartBtn) {
  openCartBtn.addEventListener('click', () => {
    cartModal.style.display = 'block';
  });
}
if (closeBtn) {
  closeBtn.addEventListener('click', function() {
    cartModal.classList.remove('open');
  });
}
</script>
<script>
document.querySelectorAll('.quantity-selector').forEach(selector => {
  const decrementBtn = selector.querySelector('.decrement');
  const incrementBtn = selector.querySelector('.increment');
  const quantitySpan = selector.querySelector('.quantity');

  const productId = selector.dataset.product;
  const size = selector.dataset.size;

  decrementBtn.addEventListener('click', () => {
    let currentQuantity = parseInt(quantitySpan.textContent);
    if (currentQuantity > 1) {
      currentQuantity -= 1;
      quantitySpan.textContent = currentQuantity;
      updateUserOrder(productId, currentQuantity, size);
    }
  });

  incrementBtn.addEventListener('click', () => {
    let currentQuantity = parseInt(quantitySpan.textContent);
    currentQuantity += 1;
    quantitySpan.textContent = currentQuantity;
    updateUserOrder(productId, currentQuantity, size);
  });
});
</script>
<script>
document.addEventListener('DOMContentLoaded', function() {
  const searchToggle = document.getElementById('searchToggle');
  const searchContainer = document.getElementById('searchContainer');

  // Toggle search bar
  searchToggle.addEventListener('click', function(e) {
    e.stopPropagation();
    searchContainer.classList.toggle('active');

    if (searchContainer.classList.contains('active')) {
      document.getElementById('searchInput').focus();
    }
  });

  // Close when clicking outside
  document.addEventListener('click', function(e) {
    if (!searchContainer.contains(e.target) && e.target !== searchToggle) {
      searchContainer.classList.remove('active');
    }
  });
const closeSearch = document.getElementById('closeSearch');
if (closeSearch) {
  closeSearch.addEventListener('click', function(e) {
    e.preventDefault();
    document.getElementById('searchContainer').classList.remove('active');
  });
}
  // Prevent closing when clicking inside search container
  searchContainer.addEventListener('click', function(e) {
    e.stopPropagation();
  });

  // Search functionality
  const searchInput = document.getElementById('searchInput');
  searchInput.addEventListener('input', function() {
    const searchTerm = this.value.toLowerCase();
    const items = document.querySelectorAll('.suggestions li');

    items.forEach(item => {
      const text = item.textContent.toLowerCase();
      item.style.display = text.includes(searchTerm) ? 'block' : 'none';
    });
  });
});

</script>



